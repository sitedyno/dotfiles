" load pathogen
filetype off
call pathogen#runtime_append_all_bundles()
call pathogen#helptags()

" Set the mapleader key
let mapleader = ","

" set the colorscheme
colorscheme desertEx-cb

" filetype detection
if has("autocmd")
	filetype plugin indent on
	autocmd BufEnter * :syntax sync fromstart
endif

" NERDTree settings
let NERDTreeShowHidden=1
let NERDTreeIgnore=['\~$', '\.svn$', '\.git$', '\.swp$']

" Enable supertab, use Ctrl+V-Tab to insert a tab
"let g:SuperTabDefaultCompletionType="context"
"let g:SuperTabContextDefaultCompletionType="<c-x><c-o>"

syntax on
let g:syntastic_enable_signs=1
let g:syntastic_auto_loc_list=1
let g:csslint_rules="errors"
let g:syntastic_cpp_include_dirs = [ '/usr/include/node', '/usr/include', 'includes', 'headers' ]
" let g:syntastic_cpp_remove_include_errors = 1

" Settings
set backspace=indent,eol,start	" Vim under cygwin
set number	" display line numbers
set hlsearch	" highlight search matches
set shm=atI	" Disable welcome screen
set ttyfast	" Improves redrawing for newer computers
" set nobk nowb noswf	" Disable backup files
set backupdir=~/.tmp//,/tmp//	" Set directories for tmp files
set directory=~/.tmp//,/tmp//
set titlestring=vim\:\ %f title	" Display filename in term window
set ruf=%l:%c ruler	" Display column:line bottom right of status line
set showcmd	" Show incomplete command
set ignorecase smartcase	" Only be case sensitive when search has uppercase letters
set mouse=a	" Enable mouse support
set ttymouse=xterm2	" define mouse support type
set enc=utf-8	" Enable utf support
set showmatch matchtime=3	" Cursor briefly returns to matching bracket
set makeprg=php\ -l\ %	" Make php the default lint program
set errorformat=%m\ in\ %f\ on\ line\ %l	" Error format
set list	" Display invisible characters
set listchars=tab:»\ ,trail:·	" Define which invisible characters are displayed
set hidden
" command mode completion (kinda irrelavant w/ command-t)
set wildmenu	" Show all completion options
set wildmode=list:longest	" More shell like completion
set smartindent

" Statusline
set statusline=%f
set statusline+=\ %{&ff}
set statusline+=\ %{&fenc}
set statusline+=\ %y
set statusline+=%h
set statusline+=%r
set statusline+=%m
set statusline+=%{fugitive#statusline()}
set statusline+=\ %#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*
" Always display status
set laststatus=2

" Ctags
set tags=./.git/tags,tags,~/www/.vendors/cakephp/2.x.x/.git/tags
map <Leader>rt :!ctags -f .git/tags<CR><CR>
map <C-\> :tnext<CR>
map <Leader>t :TlistToggle<CR>
let tlist_php_settings='php;c:class;d:constant;f:function'
let tlist_css_settings='css;c:class;i:id;s:selector'

let php_sql_query=1	" Hilight SQL syntax in strings
let php_htmlInStrings=1	" Hilight HTML in strings
let php_noShortTags=1	" Disable short tags
let php_folding=1	" Enable Folding for classes and functions
let php_baselib=1	" Hilight base library methods

" set fieltype for waf build scripts (wscript)
au BufRead,BufNewfile wscript set filetype=python

" load & reload vimrc
map <leader>v :tabnew ~/.vimrc<CR><C-W>_
map <silent> <leader>V :source ~/.vimrc<CR>:filetype detect<CR>:exe ":echo 'vimrc reloaded'"<CR>

" Omni completion
autocmd FileType css setlocal omnifunc=csscomplete#CompleteCSS
autocmd FileType html,markdown setlocal omnifunc=htmlcomplete#CompleteTags
autocmd FileType php setlocal omnifunc=phpcomplete#CompletePHP

" session settings
let g:session_autosave='yes'
let g:session_command_aliases=1

